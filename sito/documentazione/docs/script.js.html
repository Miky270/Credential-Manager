<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Rappresenta una singola credenziale.
 * @class
 */
class Credential {
    constructor(site, username, password, notes) {
        this.site = site;
        this.username = username;
        this.password = password;
        this.notes = notes;
        this.date = new Date().toLocaleString();
    }
}

/**
 * Gestisce le credenziali
 * @class
 */
class CredentialManager {
    /**
     * Crea una nuova istanza di CredentialManager
     * @constructs
     */
    constructor() {
        this.lista = new Map();
        this.loadFromServer();
    }

    /**
     * Aggiunge nuove credenziali.
     * @param {string} site - Il sito associato alle credenziali
     * @param {string} username - Lo username associato alle credenziali
     * @param {string} password - La password associata alle credenziali
     * @param {string} notes - Le note associate alle credenziali
     */
    addCredentials(site, username, password, notes) {
        const credential = new Credential(site, username, password, notes);
        this.lista.set(site, credential);
        this.saveToServer();
    }

    /**
     * Carica le credenziali dal server.
     */
    loadFromServer() {
        fetch('/credentials')
            .then(response => response.json())
            .then(data => {
                data.forEach(([site, credential]) => {
                    this.lista.set(site, new Credential(
                        credential.site,
                        credential.username,
                        credential.password,
                        credential.notes
                    ));
                });
                this.printCredentials();
            })
            .catch(error => console.error('Error loading credentials:', error));
    }

    /**
     * Salva le credenziali sul server.
     */
    saveToServer() {
        const credentialsArray = Array.from(this.lista.entries());
        fetch('/credentials', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(credentialsArray),
        })
        .then(response => response.json())
        .then(data => {
            if (!data.success) {
                console.error('Error saving credentials');
            }
        })
        .catch(error => console.error('Error saving credentials:', error));
    }

    /**
     * Stampa le credenziali.
     */
    printCredentials() {
        const credentialsList = document.getElementById('credentialsList');
        credentialsList.innerHTML = '';
        this.lista.forEach(credential => {
            const credentialItem = document.createElement('div');
            credentialItem.className = 'credential-item';
            credentialItem.innerHTML = `
                &lt;strong>Sito:&lt;/strong> ${credential.site} &lt;br>
                &lt;strong>Username:&lt;/strong> ${credential.username} &lt;br>
                &lt;strong>Password:&lt;/strong> ${credential.password} &lt;br>
                &lt;strong>Note:&lt;/strong> ${credential.notes} &lt;br>
                &lt;strong>Data:&lt;/strong> ${credential.date} &lt;br>
            `;
            credentialsList.appendChild(credentialItem);
        });
    }
}

/**
 * Gestisce l'aggiunta di una nuova credenziale.
 */
const credentialManager = new CredentialManager();

function addCredential() {
    const site = document.getElementById('site').value;
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const notes = document.getElementById('notes').value;

    credentialManager.addCredentials(site, username, password, notes);

    document.getElementById('site').value = '';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    document.getElementById('notes').value = '';
}

/**
 * Stampa le credenziali.
 */
function printCredentials() {
    credentialManager.printCredentials();
}

/**
 * Gestisce il login.
 */
function login() {
    const site = document.getElementById('site').value;
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    if (site &amp;&amp; username &amp;&amp; password) {
        const credential = credentialManager.lista.get(site);
        if (credential) {
            if (credential.username === username &amp;&amp; credential.password === password) {
                alert("Login effettuato con successo!");
            } else {
                alert("Credenziali errate");
            }
        } else {
            alert("Sito non presente nel database");
        }
    } else {
        alert("Inserisci le credenziali");
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Credential.html">Credential</a></li><li><a href="CredentialManager.html">CredentialManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#credentialManager">credentialManager</a></li><li><a href="global.html#fetchForgotPassword">fetchForgotPassword</a></li><li><a href="global.html#fetchLogin">fetchLogin</a></li><li><a href="global.html#fetchRegister">fetchRegister</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#printCredentials">printCredentials</a></li><li><a href="global.html#readCredentials">readCredentials</a></li><li><a href="global.html#readUsers">readUsers</a></li><li><a href="global.html#writeCredentials">writeCredentials</a></li><li><a href="global.html#writeUsers">writeUsers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Tue May 28 2024 17:17:51 GMT+0200 (Ora legale dellâ€™Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
